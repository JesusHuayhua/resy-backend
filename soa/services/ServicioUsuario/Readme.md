<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# cmd

```go
import "ServicioUsuario/cmd"
```

## Index



# repository

```go
import "ServicioUsuario/pkg/repository"
```

\+// Paquete repository contiene implementaciones de repositorios para interactuar con la base de datos

## Index

- [func NewUserRepository\(db \*sql.DB\) interfaces.UserRepository](<#NewUserRepository>)
- [type UserRepositoryImpl](<#UserRepositoryImpl>)
  - [func \(r \*UserRepositoryImpl\) Actualizar\(tabla string, datos interface\{\}, whereClause string, whereArgs ...interface\{\}\) error](<#UserRepositoryImpl.Actualizar>)
  - [func \(r \*UserRepositoryImpl\) Crud\(\) \*database.CRUD](<#UserRepositoryImpl.Crud>)
  - [func \(r \*UserRepositoryImpl\) Eliminar\(tabla string, id string\) error](<#UserRepositoryImpl.Eliminar>)
  - [func \(r \*UserRepositoryImpl\) Insertar\(tabla string, datos interface\{\}\) error](<#UserRepositoryImpl.Insertar>)
  - [func \(r \*UserRepositoryImpl\) Seleccionar\(tabla string, columnas \[\]string, whereClause string, args ...interface\{\}\) \(\*sql.Rows, error\)](<#UserRepositoryImpl.Seleccionar>)


<a name="NewUserRepository"></a>
## func [NewUserRepository](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/MetodosGenericos.go#L17>)

```go
func NewUserRepository(db *sql.DB) interfaces.UserRepository
```

NewUserRepository crea una nueva instancia de UserRepositoryImpl

<a name="UserRepositoryImpl"></a>
## type [UserRepositoryImpl](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/MetodosGenericos.go#L12-L14>)

UserRepositoryImpl es la implementación de la interfaz UserRepository

```go
type UserRepositoryImpl struct {
    // contains filtered or unexported fields
}
```

<a name="UserRepositoryImpl.Actualizar"></a>
### func \(\*UserRepositoryImpl\) [Actualizar](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/MetodosGenericos.go#L27>)

```go
func (r *UserRepositoryImpl) Actualizar(tabla string, datos interface{}, whereClause string, whereArgs ...interface{}) error
```



<a name="UserRepositoryImpl.Crud"></a>
### func \(\*UserRepositoryImpl\) [Crud](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/MetodosGenericos.go#L39>)

```go
func (r *UserRepositoryImpl) Crud() *database.CRUD
```



<a name="UserRepositoryImpl.Eliminar"></a>
### func \(\*UserRepositoryImpl\) [Eliminar](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/MetodosGenericos.go#L31>)

```go
func (r *UserRepositoryImpl) Eliminar(tabla string, id string) error
```



<a name="UserRepositoryImpl.Insertar"></a>
### func \(\*UserRepositoryImpl\) [Insertar](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/MetodosGenericos.go#L23>)

```go
func (r *UserRepositoryImpl) Insertar(tabla string, datos interface{}) error
```



<a name="UserRepositoryImpl.Seleccionar"></a>
### func \(\*UserRepositoryImpl\) [Seleccionar](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/MetodosGenericos.go#L35>)

```go
func (r *UserRepositoryImpl) Seleccionar(tabla string, columnas []string, whereClause string, args ...interface{}) (*sql.Rows, error)
```



# handlers

```go
import "ServicioUsuario/pkg/api/handlers"
```

Package handlers proporciona los controladores HTTP para la gestión de usuarios y roles.

## Index

- [func OpcionesHandler\(w http.ResponseWriter, r \*http.Request\)](<#OpcionesHandler>)
- [type Server](<#Server>)
  - [func NewServer\(svc \*BDoperators.ServicioUsuario\) \*Server](<#NewServer>)
  - [func \(s \*Server\) ActualizarPasswordRecuperacion\(w http.ResponseWriter, r \*http.Request\)](<#Server.ActualizarPasswordRecuperacion>)
  - [func \(s \*Server\) ActualizarRol\(w http.ResponseWriter, r \*http.Request\)](<#Server.ActualizarRol>)
  - [func \(s \*Server\) ActualizarUsuario\(w http.ResponseWriter, r \*http.Request\)](<#Server.ActualizarUsuario>)
  - [func \(s \*Server\) EliminarRol\(w http.ResponseWriter, r \*http.Request\)](<#Server.EliminarRol>)
  - [func \(s \*Server\) EliminarUsuario\(w http.ResponseWriter, r \*http.Request\)](<#Server.EliminarUsuario>)
  - [func \(s \*Server\) IniciarRecuperacionPassword\(w http.ResponseWriter, r \*http.Request\)](<#Server.IniciarRecuperacionPassword>)
  - [func \(s \*Server\) InsertarRol\(w http.ResponseWriter, r \*http.Request\)](<#Server.InsertarRol>)
  - [func \(s \*Server\) InsertarUsuario\(w http.ResponseWriter, r \*http.Request\)](<#Server.InsertarUsuario>)
  - [func \(s \*Server\) ListarRoles\(w http.ResponseWriter, r \*http.Request\)](<#Server.ListarRoles>)
  - [func \(s \*Server\) ListarUsuarios\(w http.ResponseWriter, r \*http.Request\)](<#Server.ListarUsuarios>)
  - [func \(s \*Server\) Login\(w http.ResponseWriter, r \*http.Request\)](<#Server.Login>)
  - [func \(s \*Server\) RecuperarPassword\(w http.ResponseWriter, r \*http.Request\)](<#Server.RecuperarPassword>)
  - [func \(s \*Server\) VerificarTokenRecuperacion\(w http.ResponseWriter, r \*http.Request\)](<#Server.VerificarTokenRecuperacion>)


<a name="OpcionesHandler"></a>
## func [OpcionesHandler](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L30>)

```go
func OpcionesHandler(w http.ResponseWriter, r *http.Request)
```

Handler global para OPTIONS

<a name="Server"></a>
## type [Server](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L13-L15>)

Server representa el servidor HTTP que maneja las solicitudes relacionadas con usuarios y roles.

```go
type Server struct {
    Svc *BDoperators.ServicioUsuario // Cambiado a puntero para evitar copia innecesaria
}
```

<a name="NewServer"></a>
### func [NewServer](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L18>)

```go
func NewServer(svc *BDoperators.ServicioUsuario) *Server
```

NewServer crea una nueva instancia de Server con el servicio de usuario proporcionado.

<a name="Server.ActualizarPasswordRecuperacion"></a>
### func \(\*Server\) [ActualizarPasswordRecuperacion](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L479>)

```go
func (s *Server) ActualizarPasswordRecuperacion(w http.ResponseWriter, r *http.Request)
```

POST /recuperar/actualizar ActualizarPasswordRecuperacion maneja la actualización de la contraseña de recuperación a través de una petición HTTP POST. Decodifica el cuerpo de la petición, valida los datos y llama al servicio correspondiente. Se espera que el cuerpo de la petición contenga el correo y la nueva contraseña. Si la actualización es exitosa, se devuelve un JSON con el estado de la operación Si ocurre un error al decodificar el JSON o al actualizar la contraseña, se devuelve un error HTTP 400 o 500 respectivamente. La función habilita CORS para permitir solicitudes desde diferentes orígenes. Si la petición es OPTIONS, se responde con un estado 200 OK para manejar CORS La función espera un cuerpo de petición en formato JSON con los siguientes campos: \- correo: el correo electrónico del usuario. \- nuevacontrasenia: la nueva contraseña que se desea establecer. Si la actualización es exitosa, se devuelve un JSON con el estado "ok" Si la actualización falla, se devuelve un error HTTP 400 con el mensaje de error correspondiente. Si la actualización es exitosa, se devuelve un JSON con el estado "ok".

<a name="Server.ActualizarRol"></a>
### func \(\*Server\) [ActualizarRol](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L233>)

```go
func (s *Server) ActualizarRol(w http.ResponseWriter, r *http.Request)
```

PUT /roles/\{id\}

<a name="Server.ActualizarUsuario"></a>
### func \(\*Server\) [ActualizarUsuario](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L134>)

```go
func (s *Server) ActualizarUsuario(w http.ResponseWriter, r *http.Request)
```

PUT /usuarios/\{id\} ActualizarUsuario maneja la actualización de un usuario existente a través de una petición HTTP PUT. Decodifica el cuerpo de la petición, valida los datos y llama al servicio correspondiente. Se espera que el cuerpo de la petición contenga los campos necesarios para actualizar el usuario. El campo FechaNacimiento debe estar en formato "YYYY\-MM\-DD". El ID del usuario a actualizar se obtiene del cuerpo de la petición. Si la actualización es exitosa, se devuelve un JSON con el estado de la operación.

<a name="Server.EliminarRol"></a>
### func \(\*Server\) [EliminarRol](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L268>)

```go
func (s *Server) EliminarRol(w http.ResponseWriter, r *http.Request)
```



<a name="Server.EliminarUsuario"></a>
### func \(\*Server\) [EliminarUsuario](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L176>)

```go
func (s *Server) EliminarUsuario(w http.ResponseWriter, r *http.Request)
```

DELETE /usuarios/\{id\} EliminarUsuario maneja la eliminación de un usuario existente a través de una petición HTTP DELETE. El ID del usuario a eliminar se obtiene de los parámetros de consulta. Si el ID no se proporciona, se devuelve un error HTTP 400. Si la eliminación es exitosa, se devuelve un JSON con el estado de la operación.

<a name="Server.IniciarRecuperacionPassword"></a>
### func \(\*Server\) [IniciarRecuperacionPassword](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L314>)

```go
func (s *Server) IniciarRecuperacionPassword(w http.ResponseWriter, r *http.Request)
```

POST /recuperar

<a name="Server.InsertarRol"></a>
### func \(\*Server\) [InsertarRol](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L209>)

```go
func (s *Server) InsertarRol(w http.ResponseWriter, r *http.Request)
```

POST /roles InsertarRol maneja la creación de un nuevo rol a través de una petición HTTP POST. Decodifica el cuerpo de la petición, valida los datos y llama al servicio correspondiente. Se espera que el cuerpo de la petición contenga el nombre del rol. Si la inserción es exitosa, se devuelve un JSON con el estado de la operación Si ocurre un error al decodificar el JSON o al insertar el rol, se devuelve un error HTTP 400 o 500 respectivamente. La función habilita CORS para permitir solicitudes desde diferentes orígenes. Si la petición es OPTIONS, se responde con un estado 200 OK para manejar CORS La función espera un cuerpo de petición en formato JSON con el siguiente campo: \- nombrerol: el nombre del rol a insertar.

<a name="Server.InsertarUsuario"></a>
### func \(\*Server\) [InsertarUsuario](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L46>)

```go
func (s *Server) InsertarUsuario(w http.ResponseWriter, r *http.Request)
```

POST /usuarios InsertarUsuario maneja la creación de un nuevo usuario a través de una petición HTTP POST. Decodifica el cuerpo de la petición, valida los datos y llama al servicio correspondiente. Se espera que el cuerpo de la petición contenga los campos necesarios para crear un usuario. El campo FechaNacimiento debe estar en formato "YYYY\-MM\-DD". Si la inserción es exitosa, se devuelve un JSON con el estado de la operación. Si ocurre un error al decodificar el JSON o al insertar el usuario, se devuelve un error HTTP 400 o 500 respectivamente. La función habilita CORS para permitir solicitudes desde diferentes orígenes. Si la petición es OPTIONS, se responde con un estado 200 OK para manejar CORS. La función espera un cuerpo de petición en formato JSON con los siguientes campos:

<a name="Server.ListarRoles"></a>
### func \(\*Server\) [ListarRoles](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L298>)

```go
func (s *Server) ListarRoles(w http.ResponseWriter, r *http.Request)
```

GET /roles ListarRoles maneja la obtención de roles a través de una petición HTTP GET. Permite filtrar por nombre de rol a través de parámetros de consulta. Si se proporciona el parámetro nombrerol, se filtran los roles por ese nombre. Si no se proporciona, se devuelven todos los roles. La respuesta se devuelve en formato JSON. Si ocurre un error al obtener los roles, se devuelve un error HTTP 500. Si la petición es OPTIONS, se responde con un estado 200 OK para manejar CORS.

<a name="Server.ListarUsuarios"></a>
### func \(\*Server\) [ListarUsuarios](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L99>)

```go
func (s *Server) ListarUsuarios(w http.ResponseWriter, r *http.Request)
```

GET /usuarios ListarUsuarios maneja la obtención de usuarios a través de una petición HTTP GET. Permite filtrar por ID de usuario a través de parámetros de consulta. Si se proporciona el parámetro id\_usuario, se filtran los usuarios por ese ID. Si no se proporciona, se devuelven todos los usuarios. La respuesta se devuelve en formato JSON. Si ocurre un error al obtener los usuarios, se devuelve un error HTTP 500. Si la petición es OPTIONS, se responde con un estado 200 OK para manejar CORS. Se espera que la petición tenga un parámetro de consulta opcional "id\_usuario" para filtrar los resultados. Si el parámetro "id\_usuario" está presente, se utiliza para filtrar los usuarios y se devuelve una lista de usuarios que coinciden con ese ID. Si el parámetro no está presente, se devuelven todos los usuarios. La respuesta se envía en formato JSON con el encabezado "Content\-Type" establecido a "application/json". Si ocurre un error al obtener los usuarios, se devuelve un error HTTP 500 con el mensaje de error correspondiente. Si la petición es OPTIONS, se responde con un estado 200 OK para manejar CORS

<a name="Server.Login"></a>
### func \(\*Server\) [Login](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L395>)

```go
func (s *Server) Login(w http.ResponseWriter, r *http.Request)
```

POST /login Login maneja el inicio de sesión de un usuario a través de una petición HTTP POST. Decodifica el cuerpo de la petición, valida los datos y llama al servicio correspondiente. Se espera que el cuerpo de la petición contenga el correo y la contraseña del usuario. Si el inicio de sesión es exitoso, se devuelve un JSON con el estado de acceso y los datos del usuario. Si ocurre un error al decodificar el JSON o al iniciar sesión, se devuelve un error HTTP 400 o 500 respectivamente. La función habilita CORS para permitir solicitudes desde diferentes orígenes. Si la petición es OPTIONS, se responde con un estado 200 OK para manejar CORS. La función espera un cuerpo de petición en formato JSON con los siguientes campos: \- correo: el correo electrónico del usuario. \- contrasenia: la contraseña del usuario. Si el inicio de sesión es exitoso, se devuelve un JSON con los siguientes campos: \- acceso: un booleano que indica si el inicio de sesión fue exitoso. \- usuario: un objeto que contiene los datos del usuario si el inicio de sesión fue exitoso. Si el inicio de sesión falla, se devuelve un JSON con acceso: false.

<a name="Server.RecuperarPassword"></a>
### func \(\*Server\) [RecuperarPassword](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L353>)

```go
func (s *Server) RecuperarPassword(w http.ResponseWriter, r *http.Request)
```

POST /recuperar/confirmar RecuperarPassword maneja la recuperación de la contraseña a través de una petición HTTP POST. Decodifica el cuerpo de la petición, valida los datos y llama al servicio correspondiente. Se espera que el cuerpo de la petición contenga el correo, el token de recuperación y la nueva contraseña. Si la recuperación es exitosa, se devuelve un JSON con el estado de la operación. Si ocurre un error al decodificar el JSON o al recuperar la contraseña, se devuelve un error HTTP 400 o 500 respectivamente. La función habilita CORS para permitir solicitudes desde diferentes orígenes. Si la petición es OPTIONS, se responde con un estado 200 OK para manejar CORS La función espera un cuerpo de petición en formato JSON con los siguientes campos: \- correo: el correo electrónico del usuario. \- token: el token de recuperación de contraseña. \- nuevacontrasenia: la nueva contraseña que se desea establecer. Si la recuperación es exitosa, se devuelve un JSON con el estado "ok" Si la recuperación falla, se devuelve un error HTTP 400 con el mensaje de error correspondiente.

<a name="Server.VerificarTokenRecuperacion"></a>
### func \(\*Server\) [VerificarTokenRecuperacion](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/api/handlers/handlers.go#L440>)

```go
func (s *Server) VerificarTokenRecuperacion(w http.ResponseWriter, r *http.Request)
```

POST /recuperar/verificar VerificarTokenRecuperacion maneja la verificación del token de recuperación de contraseña a través de una petición HTTP POST. Decodifica el cuerpo de la petición, valida los datos y llama al servicio correspondiente. Se espera que el cuerpo de la petición contenga el correo y el token de recuperación. Si la verificación es exitosa, se devuelve un JSON con el estado de la operación Si ocurre un error al decodificar el JSON o al verificar el token, se devuelve un error HTTP 400 o 500 respectivamente. La función habilita CORS para permitir solicitudes desde diferentes orígenes. Si la petición es OPTIONS, se responde con un estado 200 OK para manejar CORS La función espera un cuerpo de petición en formato JSON con los siguientes campos: \- correo: el correo electrónico del usuario. \- token: el token de recuperación de contraseña. Si la verificación es exitosa, se devuelve un JSON con el estado "ok" Si la verificación falla, se devuelve un error HTTP 400 con el mensaje de error correspondiente. Si la verificación es exitosa, se devuelve un JSON con el estado "ok".

# UserModels

```go
import "ServicioUsuario/pkg/core/domain"
```

Manejador de roles y usuarios

Manejador de roles y usuarios

## Index

- [type Rol](<#Rol>)
- [type RolDB](<#RolDB>)
- [type UsuarioBD](<#UsuarioBD>)
- [type UsuarioVariable](<#UsuarioVariable>)


<a name="Rol"></a>
## type [Rol](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/domain/rol.go#L9-L11>)



```go
type Rol struct {
    NombreRol string `db:"nombrerol"`
}
```

<a name="RolDB"></a>
## type [RolDB](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/domain/rol.go#L4-L7>)



```go
type RolDB struct {
    ID      int `db:"id_rol"`
    DataRol Rol
}
```

<a name="UsuarioBD"></a>
## type [UsuarioBD](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/domain/usuario.go#L17-L21>)



```go
type UsuarioBD struct {
    IdUsuario     int `db:"id_usuario"`
    DataUsuario   UsuarioVariable
    Fechacreacion time.Time `db:"fecha_creacion"`
}
```

<a name="UsuarioVariable"></a>
## type [UsuarioVariable](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/domain/usuario.go#L6-L16>)



```go
type UsuarioVariable struct {
    Nombres         string    `db:"nombres"`
    Apellidos       string    `db:"apellidos"`
    Correo          string    `db:"correo"`
    Telefono        string    `db:"telefono"`
    Direccion       string    `db:"direccion"`
    FechaNacimiento time.Time `db:"fechanacimiento"`
    Contrasenia     string    `db:"contrasenia"`
    Rol             int       `db:"rol"`
    EstadoAcceso    bool      `db:"estadoacceso"`
}
```

# internal

```go
import "ServicioUsuario/pkg/core/internal"
```

paquete de paquete internal contiene tipos y constantes internas utilizadas en el servicio de usuario Este paquete no debe ser importado por otros servicios o paquetes externos. Este paquete define tipos y constantes internas utilizadas en el servicio de usuario y no debe ser importado por otros servicios o paquetes externos. Este paquete define tipos y constantes internas utilizadas en el servicio de usuario y no debe ser importado por otros servicios o paquetes externos.

## Index

- [type Filter](<#Filter>)
- [type StatusCode](<#StatusCode>)


<a name="Filter"></a>
## type [Filter](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/internal/internal.go#L9-L12>)



```go
type Filter struct {
    Key   string `json:"key"`
    Value string `json:"value,omitempty"`
}
```

<a name="StatusCode"></a>
## type [StatusCode](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/internal/internal.go#L13>)



```go
type StatusCode int
```

<a name="InProgress"></a>

```go
const (
    InProgress StatusCode = iota + 1
    Busy
    Halted
    Error
)
```

# response

```go
import "ServicioUsuario/pkg/core/response"
```

Respuesta de servicio de usuario Este paquete define las estructuras de respuesta y solicitud para el servicio de usuario. Estas estructuras son utilizadas para manejar las solicitudes y respuestas del servicio de usuario, incluyendo la obtención de estados de tickets y solicitudes de estado del servicio.

## Index

- [type GetRequest](<#GetRequest>)
- [type ServiceStatusRequest](<#ServiceStatusRequest>)
- [type ServiceStatusResponse](<#ServiceStatusResponse>)
- [type StatusRequest](<#StatusRequest>)
- [type StatusResponse](<#StatusResponse>)


<a name="GetRequest"></a>
## type [GetRequest](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/response/user_service_response.go#L7-L9>)



```go
type GetRequest struct {
    Filters []string `json:"status,omitempty"`
}
```

<a name="ServiceStatusRequest"></a>
## type [ServiceStatusRequest](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/response/user_service_response.go#L19-L20>)



```go
type ServiceStatusRequest struct {
}
```

<a name="ServiceStatusResponse"></a>
## type [ServiceStatusResponse](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/response/user_service_response.go#L22-L25>)



```go
type ServiceStatusResponse struct {
    Code int    `json:"status"`
    Err  string `json:"err,omitempty"`
}
```

<a name="StatusRequest"></a>
## type [StatusRequest](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/response/user_service_response.go#L11-L13>)



```go
type StatusRequest struct {
    TicketID string `json:"ticketID,omitempty"`
}
```

<a name="StatusResponse"></a>
## type [StatusResponse](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/response/user_service_response.go#L15-L17>)



```go
type StatusResponse struct {
    Status int `json:"status"`
}
```

# crypton

```go
import "ServicioUsuario/pkg/repository/crypton"
```

Paquete de encriptación y desencriptación de datos Este paquete proporciona funciones para encriptar y desencriptar datos utilizando AES\-GCM.

## Index

- [func Decrypt\(ciphertext string, configuracion Config\) \(string, error\)](<#Decrypt>)
- [func Encrypt\(plaintext string, configuracion Config\) \(string, error\)](<#Encrypt>)
- [type Config](<#Config>)


<a name="Decrypt"></a>
## func [Decrypt](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/crypton/crypto.go#L63>)

```go
func Decrypt(ciphertext string, configuracion Config) (string, error)
```

Decrypt descifra un texto cifrado usando AES\-GCM

<a name="Encrypt"></a>
## func [Encrypt](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/crypton/crypto.go#L40>)

```go
func Encrypt(plaintext string, configuracion Config) (string, error)
```

Encrypt cifra un texto usando AES\-GCM

<a name="Config"></a>
## type [Config](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/crypton/crypto.go#L22-L25>)

Config representa la configuración para el cifrado

```go
type Config struct {
    EncryptionKey string `json:"encryption_key"`
    Salt          string `json:"salt"`
}
```

# database

```go
import "ServicioUsuario/pkg/repository/database"
```

Paquete database proporciona operaciones CRUD genéricas para cualquier tabla en una base de datos SQL Este paquete utiliza reflect para manejar estructuras de datos y construir consultas SQL dinámicamente.

Singleton de conexion con BD

## Index

- [type CRUD](<#CRUD>)
  - [func NuevoCRUD\(db \*sql.DB\) \*CRUD](<#NuevoCRUD>)
  - [func \(c \*CRUD\) Actualizar\(tabla string, datos interface\{\}, whereClause string, whereArgs ...interface\{\}\) error](<#CRUD.Actualizar>)
  - [func \(c \*CRUD\) Eliminar\(tabla string, id string\) error](<#CRUD.Eliminar>)
  - [func \(c \*CRUD\) Insertar\(tabla string, datos interface\{\}\) error](<#CRUD.Insertar>)
  - [func \(c \*CRUD\) Seleccionar\(tabla string, columnas \[\]string, whereClause string, args ...interface\{\}\) \(\*sql.Rows, error\)](<#CRUD.Seleccionar>)
- [type Config](<#Config>)
- [type DBManager](<#DBManager>)
  - [func NuevoDBManager\(config Config, configuracion crypton.Config\) \(\*DBManager, error\)](<#NuevoDBManager>)
  - [func \(m \*DBManager\) Cerrar\(\)](<#DBManager.Cerrar>)


<a name="CRUD"></a>
## type [CRUD](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/database/BDoperators.go#L13-L15>)

CRUD proporciona operaciones genéricas para cualquier tabla

```go
type CRUD struct {
    DB *sql.DB
}
```

<a name="NuevoCRUD"></a>
### func [NuevoCRUD](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/database/BDoperators.go#L18>)

```go
func NuevoCRUD(db *sql.DB) *CRUD
```

NuevoCRUD crea una nueva instancia de CRUD

<a name="CRUD.Actualizar"></a>
### func \(\*CRUD\) [Actualizar](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/database/BDoperators.go#L69>)

```go
func (c *CRUD) Actualizar(tabla string, datos interface{}, whereClause string, whereArgs ...interface{}) error
```

Actualizar actualiza registros en la tabla especificada con una condición flexible

<a name="CRUD.Eliminar"></a>
### func \(\*CRUD\) [Eliminar](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/database/BDoperators.go#L124>)

```go
func (c *CRUD) Eliminar(tabla string, id string) error
```

Eliminar elimina un registro de la tabla especificada

<a name="CRUD.Insertar"></a>
### func \(\*CRUD\) [Insertar](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/database/BDoperators.go#L23>)

```go
func (c *CRUD) Insertar(tabla string, datos interface{}) error
```

Insertar inserta un registro en la tabla especificada

<a name="CRUD.Seleccionar"></a>
### func \(\*CRUD\) [Seleccionar](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/database/BDoperators.go#L133>)

```go
func (c *CRUD) Seleccionar(tabla string, columnas []string, whereClause string, args ...interface{}) (*sql.Rows, error)
```



<a name="Config"></a>
## type [Config](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/database/database.go#L21-L30>)

Config representa la estructura del JSON

```go
type Config struct {
    Driver       string `json:"driver"`
    TipoDriver   string `json:"tipo_de_driver"`
    DBName       string `json:"base_de_datos"`
    Host         string `json:"nombre_de_host"`
    Port         string `json:"puerto"`
    User         string `json:"usuario"`
    DatabaseName string `json:"esquemabd"`
    Password     string `json:"contrasenha"` // Asumimos que está cifrada
}
```

<a name="DBManager"></a>
## type [DBManager](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/database/database.go#L33-L35>)

DBManager maneja la conexión a la BD

```go
type DBManager struct {
    DB *sql.DB
}
```

<a name="NuevoDBManager"></a>
### func [NuevoDBManager](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/database/database.go#L37>)

```go
func NuevoDBManager(config Config, configuracion crypton.Config) (*DBManager, error)
```



<a name="DBManager.Cerrar"></a>
### func \(\*DBManager\) [Cerrar](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/database/database.go#L68>)

```go
func (m *DBManager) Cerrar()
```

Cerrar cierra la conexión

# interfaces

```go
import "ServicioUsuario/pkg/repository/interfaces"
```

interfaces para las operacione con BD

## Index

- [type UserRepository](<#UserRepository>)


<a name="UserRepository"></a>
## type [UserRepository](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/repository/interfaces/interface_repository.go#L6-L11>)



```go
type UserRepository interface {
    Insertar(tabla string, datos interface{}) error
    Actualizar(tabla string, datos interface{}, whereClause string, whereArgs ...interface{}) error
    Eliminar(tabla string, id string) error
    Seleccionar(tabla string, columnas []string, whereClause string, args ...interface{}) (*sql.Rows, error)
}
```

# backBD

```go
import "ServicioUsuario/pkg/core/usecase/backBD"
```

Intermedio entre operaciones CRUD y la lógica de negocio del servicio de usuario Este paquete maneja la conexión a la base de datos y las operaciones CRUD para el servicio de usuario, incluyendo la encriptación de contraseñas y la gestión de roles.

## Index

- [type ServicioUsuario](<#ServicioUsuario>)
  - [func NuevoServicioUsuario\(db \*sql.DB, cryptConfig crypton.Config\) \*ServicioUsuario](<#NuevoServicioUsuario>)
  - [func \(s \*ServicioUsuario\) ActualizarPasswordRecuperacion\(correo, nuevaContrasenia string\) error](<#ServicioUsuario.ActualizarPasswordRecuperacion>)
  - [func \(s \*ServicioUsuario\) ActualizarRol\(id int, nombre string\) \(internal.StatusCode, error\)](<#ServicioUsuario.ActualizarRol>)
  - [func \(s \*ServicioUsuario\) ActualizarUsuario\(idUsuario int, nombres, apellidos, correo, telefono, direccion string, fechaNacimiento time.Time, contrasenia string, rol int, estado bool\) \(internal.StatusCode, error\)](<#ServicioUsuario.ActualizarUsuario>)
  - [func \(s \*ServicioUsuario\) EliminarRol\(id int\) \(internal.StatusCode, error\)](<#ServicioUsuario.EliminarRol>)
  - [func \(s \*ServicioUsuario\) EliminarUsuario\(id int\) \(internal.StatusCode, error\)](<#ServicioUsuario.EliminarUsuario>)
  - [func \(s \*ServicioUsuario\) Get\(\_ context.Context, filters ...internal.Filter\) \(internal.StatusCode, \[\]UserModels.UsuarioBD, error\)](<#ServicioUsuario.Get>)
  - [func \(s \*ServicioUsuario\) IniciarRecuperacionPassword\(correo string\) \(string, error\)](<#ServicioUsuario.IniciarRecuperacionPassword>)
  - [func \(s \*ServicioUsuario\) InsertarNuevoRol\(nombre string\) \(internal.StatusCode, error\)](<#ServicioUsuario.InsertarNuevoRol>)
  - [func \(s \*ServicioUsuario\) InsertarNuevoUsuario\(nombres, apellidos, correo, telefono, direccion string, fechaNacimiento time.Time, contrasenia string, rol int\) \(internal.StatusCode, error\)](<#ServicioUsuario.InsertarNuevoUsuario>)
  - [func \(s \*ServicioUsuario\) Login\(correo, contrasenia string\) \(bool, UserModels.UsuarioBD, error\)](<#ServicioUsuario.Login>)
  - [func \(s \*ServicioUsuario\) RecuperarPassword\(correo, token, nuevaContrasenia string\) error](<#ServicioUsuario.RecuperarPassword>)
  - [func \(s \*ServicioUsuario\) SeleccionarRoles\(filtro string, params \[\]interface\{\}\) \(internal.StatusCode, \[\]UserModels.RolDB, error\)](<#ServicioUsuario.SeleccionarRoles>)
  - [func \(s \*ServicioUsuario\) SeleccionarUsuarios\(condicion string, args \[\]interface\{\}\) \(internal.StatusCode, \[\]UserModels.UsuarioBD, error\)](<#ServicioUsuario.SeleccionarUsuarios>)
  - [func \(s \*ServicioUsuario\) ServiceStatus\(\_ context.Context\) \(int, error\)](<#ServicioUsuario.ServiceStatus>)
  - [func \(s \*ServicioUsuario\) Status\(\_ context.Context, userId string\) \(internal.StatusCode, error\)](<#ServicioUsuario.Status>)
  - [func \(s \*ServicioUsuario\) VerificarTokenRecuperacion\(correo, token string\) error](<#ServicioUsuario.VerificarTokenRecuperacion>)


<a name="ServicioUsuario"></a>
## type [ServicioUsuario](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L27-L31>)



```go
type ServicioUsuario struct {
    // contains filtered or unexported fields
}
```

<a name="NuevoServicioUsuario"></a>
### func [NuevoServicioUsuario](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L34>)

```go
func NuevoServicioUsuario(db *sql.DB, cryptConfig crypton.Config) *ServicioUsuario
```

Permite la Conexion de un nuevo usuario para hacer operaciones CRUD con la base de datos

<a name="ServicioUsuario.ActualizarPasswordRecuperacion"></a>
### func \(\*ServicioUsuario\) [ActualizarPasswordRecuperacion](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L332>)

```go
func (s *ServicioUsuario) ActualizarPasswordRecuperacion(correo, nuevaContrasenia string) error
```

Actualiza la contraseña \(requiere que el token ya haya sido validado\)

<a name="ServicioUsuario.ActualizarRol"></a>
### func \(\*ServicioUsuario\) [ActualizarRol](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L201>)

```go
func (s *ServicioUsuario) ActualizarRol(id int, nombre string) (internal.StatusCode, error)
```



<a name="ServicioUsuario.ActualizarUsuario"></a>
### func \(\*ServicioUsuario\) [ActualizarUsuario](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L88>)

```go
func (s *ServicioUsuario) ActualizarUsuario(idUsuario int, nombres, apellidos, correo, telefono, direccion string, fechaNacimiento time.Time, contrasenia string, rol int, estado bool) (internal.StatusCode, error)
```

Actualiza los datos de un usuario existente, encriptando la contraseña si se proporciona una nueva

<a name="ServicioUsuario.EliminarRol"></a>
### func \(\*ServicioUsuario\) [EliminarRol](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L212>)

```go
func (s *ServicioUsuario) EliminarRol(id int) (internal.StatusCode, error)
```



<a name="ServicioUsuario.EliminarUsuario"></a>
### func \(\*ServicioUsuario\) [EliminarUsuario](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L119>)

```go
func (s *ServicioUsuario) EliminarUsuario(id int) (internal.StatusCode, error)
```

Elimina un usuario de la base de datos por su ID de manera LOGICA

<a name="ServicioUsuario.Get"></a>
### func \(\*ServicioUsuario\) [Get](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L45>)

```go
func (s *ServicioUsuario) Get(_ context.Context, filters ...internal.Filter) (internal.StatusCode, []UserModels.UsuarioBD, error)
```



<a name="ServicioUsuario.IniciarRecuperacionPassword"></a>
### func \(\*ServicioUsuario\) [IniciarRecuperacionPassword](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L251>)

```go
func (s *ServicioUsuario) IniciarRecuperacionPassword(correo string) (string, error)
```

Inicia el proceso de recuperación de contraseña

<a name="ServicioUsuario.InsertarNuevoRol"></a>
### func \(\*ServicioUsuario\) [InsertarNuevoRol](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L191>)

```go
func (s *ServicioUsuario) InsertarNuevoRol(nombre string) (internal.StatusCode, error)
```



<a name="ServicioUsuario.InsertarNuevoUsuario"></a>
### func \(\*ServicioUsuario\) [InsertarNuevoUsuario](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L62>)

```go
func (s *ServicioUsuario) InsertarNuevoUsuario(nombres, apellidos, correo, telefono, direccion string, fechaNacimiento time.Time, contrasenia string, rol int) (internal.StatusCode, error)
```

Inserta un nuevo usuario en la base de datos y encripta su contraseña

<a name="ServicioUsuario.Login"></a>
### func \(\*ServicioUsuario\) [Login](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L394>)

```go
func (s *ServicioUsuario) Login(correo, contrasenia string) (bool, UserModels.UsuarioBD, error)
```

Login verifica las credenciales y retorna la info del usuario \(sin contraseña\) y estado de acceso

<a name="ServicioUsuario.RecuperarPassword"></a>
### func \(\*ServicioUsuario\) [RecuperarPassword](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L281>)

```go
func (s *ServicioUsuario) RecuperarPassword(correo, token, nuevaContrasenia string) error
```

Cambia la contraseña si el token es válido

<a name="ServicioUsuario.SeleccionarRoles"></a>
### func \(\*ServicioUsuario\) [SeleccionarRoles](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L219>)

```go
func (s *ServicioUsuario) SeleccionarRoles(filtro string, params []interface{}) (internal.StatusCode, []UserModels.RolDB, error)
```



<a name="ServicioUsuario.SeleccionarUsuarios"></a>
### func \(\*ServicioUsuario\) [SeleccionarUsuarios](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L128>)

```go
func (s *ServicioUsuario) SeleccionarUsuarios(condicion string, args []interface{}) (internal.StatusCode, []UserModels.UsuarioBD, error)
```

Devuelve una lista de usuarios de la base de datos según una condición opcional

<a name="ServicioUsuario.ServiceStatus"></a>
### func \(\*ServicioUsuario\) [ServiceStatus](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L56>)

```go
func (s *ServicioUsuario) ServiceStatus(_ context.Context) (int, error)
```



<a name="ServicioUsuario.Status"></a>
### func \(\*ServicioUsuario\) [Status](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L51>)

```go
func (s *ServicioUsuario) Status(_ context.Context, userId string) (internal.StatusCode, error)
```



<a name="ServicioUsuario.VerificarTokenRecuperacion"></a>
### func \(\*ServicioUsuario\) [VerificarTokenRecuperacion](<https://github.com/JesusHuayhua/resy-backend/blob/main/soa/services/ServicioUsuario/pkg/core/usecase/backBD/Service_Conection_with_BD.go#L308>)

```go
func (s *ServicioUsuario) VerificarTokenRecuperacion(correo, token string) error
```

Verifica si el token es válido para el correo dado

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
